# 总结

内存管理-引用计数

* 自己生成的对象，自己持有。（alloc、new、copy、mutableCopy开头的方法）
* 不是自己生成的对象，自己也能持有。
* 不再需要自己持有的对象时要释放。
* 非自己持有的持有对象不能释放。

iOS 内存分区

* 栈区（stack）：由编译器自动分配释放 ，存放函数的参数值，局部变量的值等。其 操作方式类似于数据结构中的栈。

* 堆区（heap）：一般由程序员分配释放， 若程序员不释放，程序结束时可能由OS回收 。注意它与数据结构中的堆是两回事，分配方式倒是类似于链表。

* 全局区（静态区）（static）：全局变量和静态变量的存储是放在一块的，初始化的 全局变量和静态变量在一块区域， 未初始化的全局变量和未初始化的静态变量在相邻的另一块区域。 - 程序结束后由系统释放。

* 文字常量区：常量字符串就是放在这里的。 程序结束后由系统释放。

* 程序代码区：存放函数体的二进制代码。

在代码分析之前，我们有必要对程序中的内存区域划分有所了解，其大致的分类如下：

| 内存区域 | 具体说明                                                     |
| :------- | :----------------------------------------------------------- |
| 栈区     | 存放局部变量的值，系统自动分配和释放;特点：容量小，速度快，有序 |
| 堆区     | 存放通过malloc系列函数或new操作符分配的内存，如对象；一般由程序员分配和释放，如果不释放，则出现内存泄露;特点：容量大，速度慢，无序； |
| 静态区   | 存放全局变量和静态变量(包括静态局部变量和静态全局变量)；当程序结束时，系统回收； |
| 常量区   | 存放常量的内存区域；程序结束时，系统回收；                   |
| 代码区   | 存放二进制代码的区域                                         |

Core Animation

* 注意模型层和表现层的区别
* 添加动画要同时把最终状态添加到模型层上