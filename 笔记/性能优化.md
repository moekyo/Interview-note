# 性能优化

[iOS App 稳定性指标及监测](https://juejin.cn/post/6844903488757973006)

[iOS 保持界面流畅的技巧](https://blog.ibireme.com/2015/11/12/smooth_user_interfaces_for_ios/)

## 解决方案

- ### 优化业务流程

- ### 合理的线程分配

- ### 预处理和懒加载

- ### 正确地使用API

  - 选择合适的容器;
  - 了解 `imageNamed:` 与 `imageWithContentsOfFile:`的差异(`imageNamed:` 适用于会重复加载的小图片，因为系统会自动缓存加载的图片，`imageWithContentsOfFile:` 仅加载图片)
  - 缓存 `NSDateFormatter` 的结果。
  - 寻找 `(NSDate *)dateFromString:(NSString )string` 的替换品。
  - 不要随便使用NSLog
  - 当试图获取磁盘中一个文件的属性信息时，使用 `[NSFileManager attributesOfItemAtPath:error:]` 会浪费大量时间读取可能根本不需要的附加属性。这时可以使用 `stat` 代替 `NSFileManager`，直接获取文件属性：

```objective-c
#import <sys/stat.h>
struct stat statbuf;
const char *cpath = [filePath fileSystemRepresentation];
if (cpath && stat(cpath, &statbuf) == 0) {
    NSNumber *fileSize = [NSNumber numberWithUnsignedLongLong:statbuf.st_size];
    NSDate *modificationDate = [NSDate dateWithTimeIntervalSince1970:statbuf.st_mtime];
    NSDate *creationDate = [NSDate dateWithTimeIntervalSince1970:statbuf.st_ctime];
    // etc
}
```

